import{_ as p}from"./DqPHLXxX.js";import{r as c,l as m,c as i,a as s,b as f,w as g,o as u,s as h,d as v,t as y}from"./C_xtq39S.js";const C=["disabled"],b={key:0},k=["href"],R={__name:"upload",setup(N){const o=c(null),t=c("");function d(e){o.value=e.target.files[0]}async function _(){if(!o.value)return;const e=o.value,l=encodeURIComponent(e.name);try{const a=await fetch(`/api/presign?fileName=${l}`),{url:r}=await a.json();if((await fetch(r,{method:"PUT",headers:{"Content-Type":e.type},body:e})).ok){const n=r.split("?")[0];t.value=n,localStorage.setItem("image_url",n),alert("アップロード成功: "+n)}else alert("アップロード失敗")}catch(a){console.error("アップロード中にエラー:",a),alert("アップロードに失敗しました。")}}return m(()=>{const e=localStorage.getItem("image_url");e&&(t.value=e)}),(e,l)=>{const a=p;return u(),i("div",null,[s("input",{type:"file",onChange:d},null,32),f(a,null,{default:g(()=>[s("button",{onClick:_,disabled:!o.value},"アップロード",8,C),t.value?(u(),i("p",b,[l[0]||(l[0]=v(" 画像URL: ")),s("a",{href:t.value,target:"_blank"},y(t.value),9,k)])):h("",!0)]),_:1})])}}};export{R as default};
