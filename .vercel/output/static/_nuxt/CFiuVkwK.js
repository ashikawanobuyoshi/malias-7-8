import{_ as O}from"./DodYhufj.js";import{g as q,j as z,k as N,r as c,l as H,m as T,n as G,p as P,c as s,o as n,a as e,q as A,s as E,t as h,v as K,d as Q,x as W,F as w,y as I,z as V,b as X,w as Y,A as Z}from"./C_xtq39S.js";import{u as ee}from"./CtiIvaeS.js";import{_ as te}from"./DlAUqK2U.js";const le={class:"p-4"},oe={class:"text-xl font-bold mb-2"},ae={key:0,class:"mt-4 text-gray-500"},se={key:1,class:"mt-4 text-gray-500"},ne={class:"image-selector mt-10"},re={class:"monitor-container"},ie={class:"monitor monitor-left"},ue={class:"image-wrapper"},ce=["src","alt"],ve={class:"image-name"},de={class:"monitor monitor-right"},me={class:"image-wrapper"},fe=["src","alt"],he={class:"image-name"},_e={class:"toggle-scroll-link"},ge={class:"thumbnail-container flex gap-4"},pe={class:"flex gap-2"},be=["onClick"],xe=["src","alt"],ke={class:"thumb-name block text-center text-sm mt-1"},ye={class:"flex gap-2"},Ne=["onClick"],we=["src","alt"],Ie={class:"thumb-name block text-center text-sm mt-1"},Ce={class:"favorites-nav"},Se={class:"favorites"},Le={class:"favorites-gallery"},Fe=["onClick"],Te=["src","alt"],Ae=q({__name:"index",setup(Ee,{expose:R}){const C=z(),S=async()=>{localStorage.removeItem("user"),localStorage.removeItem("isAuthenticated");const t=T("isAuthenticated");t.value="",await C.push("/login")},U=N(()=>{try{const t=localStorage.getItem("user");return t?JSON.parse(t).name:"ã‚²ã‚¹ãƒˆ"}catch{return"ã‚²ã‚¹ãƒˆ"}return"ã‚²ã‚¹ãƒˆ"});R({logout:S});const b=c("5_11koyama sama"),v=c([]),_=c(!1),x=c(0),k=c(0),d=N(()=>v.value[x.value]||{url:"",fileName:"ç”»åƒãŒã‚ã‚Šã¾ã›ã‚“"}),m=N(()=>v.value[k.value]||{url:"",fileName:"ç”»åƒãŒã‚ã‚Šã¾ã›ã‚“"}),r=ee(),i=c(null),u=c(null),y=c(!0);let g=null,p=null;const $=async()=>{console.log("ðŸ§ª S3 fetch å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ä¸­"),_.value=!0;try{const t=await $fetch("/api/list-images",{method:"GET",params:{folder:b.value}});v.value=t.images.map(l=>({...l,fileName:l.key.split("/").pop()||"(ãƒ•ã‚¡ã‚¤ãƒ«åä¸æ˜Ž)"}))}catch(t){console.error("ç”»åƒå–å¾—ã‚¨ãƒ©ãƒ¼:",t),v.value=[]}finally{_.value=!1}};function j(t){x.value=t}function B(t){k.value=t}function D(){console.log("ðŸŸ¡ leftImage:",d.value),d.value?L({...d.value}):alert("å·¦ç”»åƒãŒé¸æŠžã•ã‚Œã¦ã„ã¾ã›ã‚“")}function J(){console.log("ðŸŸ¡ rightImage:",m.value),m.value?L({...m.value}):alert("å³ç”»åƒãŒé¸æŠžã•ã‚Œã¦ã„ã¾ã›ã‚“")}function L(t){if(console.log("ðŸ§ª addFavorite å‘¼ã³å‡ºã—:",t),!(typeof t.url=="string"&&t.url.trim()!=="")||!(typeof t.fileName=="string"&&t.fileName.trim()!=="")){console.warn("âŒ URL ã¾ãŸã¯ fileName ãŒæœªå®šç¾©ã¾ãŸã¯ç©ºæ–‡å­—ã§ã™:",t),alert("ç”»åƒãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ");return}if(r.favoriteImages.find(l=>l.url===t.url)){alert("ã“ã®ç”»åƒã¯ã™ã§ã«ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã•ã‚Œã¦ã„ã¾ã™");return}r.addFavorite({fileName:t.fileName,url:t.url,selectedType:"",quantity:1}),console.log("âœ… è¿½åŠ å¾Œã®ãŠæ°—ã«å…¥ã‚Šä¸€è¦§:",r.favoriteImages)}function M(t){r.removeFavorite(t)}return H(()=>{console.log("âœ… index.vue ãƒžã‚¦ãƒ³ãƒˆã•ã‚Œã¾ã—ãŸ");const t=T("isAuthenticated");console.log("ðŸŸ£ isAuthenticated ã‚¯ãƒƒã‚­ãƒ¼å€¤:",t.value),console.log("ðŸ§­ ç¾åœ¨ã®ãƒ«ãƒ¼ãƒˆ:",C.currentRoute.value.fullPath);const l=localStorage.getItem("favoriteImages");if(l)try{const f=JSON.parse(l);r.favoriteImages.splice(0,r.favoriteImages.length,...f)}catch(f){console.error("localStorage ã‹ã‚‰ã®å¾©å…ƒã«å¤±æ•—ã—ã¾ã—ãŸ:",f)}}),G(()=>r.favoriteImages,t=>{localStorage.setItem("favoriteImages",JSON.stringify(t))},{deep:!0}),P(()=>{!i.value||!u.value||(i.value.removeEventListener("scroll",g),u.value.removeEventListener("scroll",p),y.value?(g=()=>{u.value&&i.value&&(u.value.scrollLeft=i.value.scrollLeft)},p=()=>{i.value&&u.value&&(i.value.scrollLeft=u.value.scrollLeft)},i.value.addEventListener("scroll",g),u.value.addEventListener("scroll",p)):(g=null,p=null))}),(t,l)=>{const f=O;return n(),s("div",le,[l[5]||(l[5]=e("h1",null,"âœ… ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æ¥ã¾ã—ãŸ",-1)),e("h1",oe,"ã‚ˆã†ã“ãã€"+h(U.value)+" ã•ã‚“ã€‚",1),e("button",{onClick:S,class:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded"}," ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ "),l[6]||(l[6]=e("h1",{class:"text-2xl font-bold mb-4"},"ãƒ•ã‚©ãƒ«ãƒ€å†…ã®ç”»åƒã‚®ãƒ£ãƒ©ãƒªãƒ¼",-1)),A(e("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>b.value=o),type:"text",placeholder:"ä¾‹: 5_11koyama sama",class:"border border-gray-300 p-2 rounded mb-4 w-full"},null,512),[[K,b.value]]),e("button",{onClick:$,class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"}," ç”»åƒã‚’èª­ã¿è¾¼ã‚€ "),_.value?(n(),s("div",ae,"èª­ã¿è¾¼ã¿ä¸­...")):E("",!0),!_.value&&v.value.length===0?(n(),s("div",se,"ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚")):E("",!0),e("div",ne,[e("div",re,[e("div",ie,[e("div",ue,[e("img",{src:d.value.url,alt:d.value.fileName},null,8,ce)]),e("div",ve,h(d.value.fileName),1)]),e("div",de,[e("div",me,[e("img",{src:m.value.url,alt:m.value.fileName},null,8,fe)]),e("div",he,h(m.value.fileName),1)])]),e("div",_e,[e("label",null,[A(e("input",{type:"checkbox","onUpdate:modelValue":l[1]||(l[1]=o=>y.value=o)},null,512),[[W,y.value]]),l[2]||(l[2]=Q(" ã‚µãƒ ãƒã‚¤ãƒ«ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’é€£å‹•ã•ã›ã‚‹ "))])]),e("div",ge,[e("div",{ref_key:"leftThumbnail",ref:i,class:"thumbnail left-thumbnail overflow-x-auto whitespace-nowrap w-full"},[e("div",pe,[(n(!0),s(w,null,I(v.value,(o,a)=>(n(),s("div",{key:"left-"+a,class:V(["thumbnail-item flex-shrink-0 w-32",{active:a===x.value}]),onClick:F=>j(a)},[e("img",{src:o.url,alt:o.fileName,class:"w-full h-auto object-contain rounded"},null,8,xe),e("span",ke,h(o.fileName),1)],10,be))),128))])],512),e("div",{ref_key:"rightThumbnail",ref:u,class:"thumbnail right-thumbnail overflow-x-auto whitespace-nowrap w-full"},[e("div",ye,[(n(!0),s(w,null,I(v.value,(o,a)=>(n(),s("div",{key:"right-"+a,class:V(["thumbnail-item flex-shrink-0 w-32",{active:a===k.value}]),onClick:F=>B(a)},[e("img",{src:o.url,alt:o.fileName,class:"w-full h-auto object-contain rounded"},null,8,we),e("span",Ie,h(o.fileName),1)],10,Ne))),128))])],512)]),e("div",{class:"controls"},[e("button",{onClick:D},"ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ï¼ˆå·¦ç”»åƒï¼‰"),e("button",{onClick:J},"ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ï¼ˆå³ç”»åƒï¼‰")]),e("div",Ce,[X(f,{to:"/favorites"},{default:Y(()=>l[3]||(l[3]=[e("button",{class:"favorites-button"},"ãŠæ°—ã«å…¥ã‚Šãƒšãƒ¼ã‚¸ã¸",-1)])),_:1,__:[3]})]),e("div",Se,[l[4]||(l[4]=e("h3",null,"ãŠæ°—ã«å…¥ã‚Šç”»åƒ",-1)),e("div",Le,[(n(!0),s(w,null,I(Z(r).favoriteImages,(o,a)=>(n(),s("div",{key:a,class:"favorite-item",onClick:F=>M(a)},[e("img",{src:o.url,alt:o.fileName},null,8,Te)],8,Fe))),128))])])])])}}}),je=te(Ae,[["__scopeId","data-v-e55d641d"]]);export{je as default};
