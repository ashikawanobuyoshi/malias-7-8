import{_ as g}from"./DqPHLXxX.js";import{g as v,r as i,B as w,w as _,j as f,o as u,a,C as h,q as c,c as y,s as k,v as m,t as x,m as S,D as B}from"./C_xtq39S.js";const C={key:0},q=v({__name:"login",setup(b){const s=i(""),l=i(""),t=i(""),p=f(),d=async()=>{console.log("handleLoginå®Ÿè¡Œ");try{const o=await $fetch("/api/login",{method:"POST",body:{email:s.value,password:l.value}});if(console.log("âœ… ãƒ¬ã‚¹ãƒãƒ³ã‚¹:",o),o.success){console.log("âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¿å­˜:",o.user),localStorage.setItem("user",JSON.stringify(o.user)),localStorage.setItem("isAuthenticated","true");const e=S("isAuthenticated");e.value="true",await B(),await new Promise(n=>setTimeout(n,100)),console.log("ðŸ” ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã¸é·ç§»å®Ÿè¡Œ"),await p.push("/"),console.log("âœ… é·ç§»æˆåŠŸ")}else t.value="ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã¾ã™ã€‚"}catch(o){console.error("ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—:",o),t.value="é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"}};return(o,e)=>{const n=g;return u(),w(n,null,{default:_(()=>[a("form",{onSubmit:h(d,["prevent"])},[c(a("input",{type:"email","onUpdate:modelValue":e[0]||(e[0]=r=>s.value=r),name:"email",id:"email",autocomplete:"email",placeholder:"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹",required:""},null,512),[[m,s.value]]),c(a("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=r=>l.value=r),name:"password",id:"password",autocomplete:"current-password",placeholder:"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰",required:""},null,512),[[m,l.value]]),e[2]||(e[2]=a("button",{type:"submit"},"ãƒ­ã‚°ã‚¤ãƒ³",-1)),t.value?(u(),y("p",C,x(t.value),1)):k("",!0)],32)]),_:1})}}});export{q as default};
